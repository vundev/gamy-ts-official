var gamy;!function(a){a.version="0.0.0"}(gamy||(gamy={}));var gamy;!function(a){!function(a){a[a.VERBOSE=0]="VERBOSE",a[a.NO_LOG=1]="NO_LOG"}(a.LogLevels||(a.LogLevels={}));var b=(a.LogLevels,function(){function a(a,b){void 0===b&&(b=null),this._name="["+a+"]",this._options=b||{}}return Object.defineProperty(a.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),a}());a.LogOptions=b}(gamy||(gamy={}));var gamy;!function(a){var b=function(){function a(a,b){this.callbacks=new Array,this.context=a,this.callbacks=b}return a}(),c=function(){function c(a){this._listenerMap={},this._target=a}return c.prototype.addEventListener=function(c,d,e){void 0==this._listenerMap[c]&&(this._listenerMap[c]=new Array);for(var f=this._listenerMap[c],g=f.length,h=0;h<g;h++)if(f[h].context==e){if(a.ArrayTools.has(f[h].callbacks,d))return;return void f[h].callbacks.push(d)}f.push(new b(e,[d]))},c.prototype.hasEventListener=function(a){return void 0!=this._listenerMap[a]},c.prototype.hasEventListenerForSpecificContext=function(b,c,d){if(this.hasEventListener(b))for(var e=this._listenerMap[b],f=e.length,g=0;g<f;g++)if(e[g].context==c&&a.ArrayTools.has(e[g].callbacks,d))return!0;return!1},c.prototype.dispatchEvent=function(a){if("string"==typeof a&&(a={type:a}),void 0==a.target&&(a.target=this._target||this),this.hasEventListener(a.type))for(var b=this._listenerMap[a.type].concat(),c=b.length,d=0;d<c;d++)for(var e=b[d].callbacks.concat(),f=e.length,g=0;g<f;g++)this.hasEventListenerForSpecificContext(a.type,b[d].context,e[g])&&e[g].call(b[d].context,a)},c.prototype.removeEventListener=function(a,b,c){if(this.hasEventListener(a)){for(var d=this._listenerMap[a],e=d.length,f=0;f<e;f++){var g=d[f].context==c;if(!c||g){var h=d[f].callbacks.indexOf(b);if(h>-1&&(d[f].callbacks.splice(h,1),0==d[f].callbacks.length&&(d.splice(f,1),f--,e--)),c&&g)break}}0==d.length&&delete this._listenerMap[a]}},c}();a.EventDispatcher=c}(gamy||(gamy={}));var gamy;!function(a){var b=function(){function a(a,b){void 0===b&&(b=null),this.type=a,this.target=b}return a.COMPLETE="complete",a.FAIL="fail",a.CHILD_COMPLETE="childComplete",a.CHILD_FAIL="childFail",a.CHILD_OPEN="childOpen",a.UNLOAD="unload",a.OPEN="open",a}();a.LoaderEvent=b}(gamy||(gamy={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},gamy;!function(a){!function(a){a[a.READY=0]="READY",a[a.LOADING=1]="LOADING",a[a.COMPLETED=2]="COMPLETED",a[a.FAILED=3]="FAILED"}(a.LoaderStatus||(a.LoaderStatus={}));var b=a.LoaderStatus,c=function(c){function d(e){if(void 0===e&&(e=null),c.call(this),this._status=b.READY,this.vars=e||{},this.name=void 0!=this.vars.name&&""!=this.vars.name?this.vars.name:"loader"+d._loaderCount++,void 0==d._globalRootLoader){if(1==this.vars.__isRoot)return;d._globalRootLoader=new a.LoaderMax({name:"root",__isRoot:!0})}this!=d._globalRootLoader&&d._globalRootLoader.append(this)}return __extends(d,c),d.prototype.load=function(){this._status==b.FAILED&&this.unload(),this._status==b.READY?(this._status=b.LOADING,this._load(),this.dispatchEvent(new a.LoaderEvent(a.LoaderEvent.OPEN,this))):this._status==b.COMPLETED&&this.completeHandler()},d.prototype._load=function(){},d.prototype.unload=function(){this._content=null;var c=this._status;this._status=b.READY,c==b.COMPLETED&&this.dispatchEvent(new a.LoaderEvent(a.LoaderEvent.UNLOAD))},d.prototype.completeHandler=function(c){void 0===c&&(c=null),this._status=b.COMPLETED,this.dispatchEvent(new a.LoaderEvent(a.LoaderEvent.COMPLETE))},d.prototype.errorHandler=function(c){void 0===c&&(c=null),this._status=b.FAILED,this.dispatchEvent(new a.LoaderEvent(a.LoaderEvent.FAIL))},d.prototype.toString=function(){return this.name},Object.defineProperty(d.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"content",{get:function(){return this._content},enumerable:!0,configurable:!0}),d._loaderCount=0,d}(a.EventDispatcher);a.LoaderCore=c}(gamy||(gamy={}));var gamy;!function(a){var b=function(b){function c(a,c){void 0===c&&(c=null),b.call(this,c),this.url=a}return __extends(c,b),c.prototype.getQueryString=function(a){for(var b="?",c=Object.keys(a),d=0;d<c.length;d++){var e=c[d];b+=e+"="+a[e]+"&"}return b.substr(0,b.length-1)},Object.defineProperty(c.prototype,"completeURL",{get:function(){return this.url+this.query},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"query",{get:function(){return void 0!=this.vars.query?this.getQueryString(this.vars.noCache?new a.Hash(this.vars.query).merge({gyCacheBusterID:c._cacheID++}):this.vars.query):this.vars.noCache?"?gyCacheBusterID="+c._cacheID++:""},enumerable:!0,configurable:!0}),c.prototype.toString=function(){return b.prototype.toString.call(this)+" url: "+this.url},c._cacheID=(new Date).getTime(),c}(a.LoaderCore);a.LoaderItem=b}(gamy||(gamy={}));var gamy;!function(a){function b(a){var b=a.split(".");try{for(var c=window,d=b.length,e=0;e<d;e++)c=c[b[e]];return c}catch(f){return null}}function c(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b]}function d(a){for(var b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];a||c.apply(null,b)}function e(b){var c=a.GUID.create();return i[c]=new j(0,b),c}function f(a){var b=i[a],c=(new Date).getTime(),d=b.ts;return b.ts=c,c-d<b.time}function g(a){delete i[a]}function h(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))}a.NAMESPACE="gamy",a.getDefinitionByName=b,a.trace=c,a.log=d;var i={},j=function(){function a(a,b){this.ts=a,this.time=b}return a}();a.setCondition=e,a.checkCondition=f,a.clearCondition=g,a.isMobile=h}(gamy||(gamy={}));var gamy;!function(a){var b=function(b){function c(c,d){if(void 0===d&&(d=null),b.call(this,c,d),this._documentClassName=this.vars.documentClassName,void 0==this._documentClassName)throw new Error("Must point to a valid document class name!");this._scriptID=a.NAMESPACE+this.name}return __extends(c,b),c.prototype.createScriptElemnt=function(){this._script=document.createElement("script"),this._script.id=this._scriptID},c.prototype._load=function(){var b=this;this.createScriptElemnt(),this._script.onload=function(c){var d=a.getDefinitionByName(b._documentClassName);b._content=new d,b.completeHandler(c)},this._script.onerror=function(a){b.errorHandler(a)},this._script.src=this.completeURL,$("head")[0].appendChild(this._script)},c.prototype.unload=function(){$("#"+this._scriptID).remove(),b.prototype.unload.call(this)},c}(a.LoaderItem);a.GameLoader=b}(gamy||(gamy={}));var gamy;!function(a){var b=function(b){function c(a,c){void 0===c&&(c=null),b.call(this,a,c)}return __extends(c,b),c.prototype._load=function(){var a=this,b=new XMLHttpRequest;b.overrideMimeType&&b.overrideMimeType("application/json"),b.open("GET",this.completeURL,!0),b.onreadystatechange=function(){4==Number(b.readyState)&&"200"==String(b.status)?(a._content=JSON.parse(b.responseText),a.parseLoaders(a._content.loaders),a.completeHandler()):a.errorHandler()},b.send(null)},c.prototype.parseLoaders=function(b,c){for(var d=0;d<b.length;d++){var e=b[d],f=a.getDefinitionByName("gamy."+e.type),g="LoaderMax"==e.type?new f(e.vars):new f(e.url,e.vars);void 0!=c&&c.append(g),"LoaderMax"==e.type&&this.parseLoaders(e.children,g)}},c}(a.LoaderItem);a.JSONLoader=b}(gamy||(gamy={}));var gamy;!function(a){var b=function(b){function c(a){void 0===a&&(a=null),b.call(this,a),this._loaders=[],this._completeLoadersCount=0,this._prependURLs=void 0!=this.vars.prependURLs?this.vars.prependURLs:""}return __extends(c,b),c.prototype._load=function(){for(var a=this._loaders.length,b=0;b<a;b++)this._loaders[b].load()},c.prototype.completeChildHandler=function(b){this._completeLoadersCount++,this.dispatchEvent(new a.LoaderEvent(a.LoaderEvent.CHILD_COMPLETE,b.target)),this._completeLoadersCount==this._loaders.length&&(this._status==a.LoaderStatus.FAILED?this.errorHandler():this.completeHandler())},c.prototype.errorChildHandler=function(b){this._completeLoadersCount++,this._status=a.LoaderStatus.FAILED,this.dispatchEvent(new a.LoaderEvent(a.LoaderEvent.CHILD_FAIL,b.target)),this._completeLoadersCount==this._loaders.length&&this.errorHandler()},c.prototype.unloadChildHandler=function(a){this._completeLoadersCount--},c.prototype.openChildHandler=function(b){this.dispatchEvent(new a.LoaderEvent(a.LoaderEvent.CHILD_OPEN,b.target))},c.prototype.append=function(b){return a.ArrayTools.has(this._loaders,b)?null:(b instanceof a.LoaderItem&&(b.url=this._prependURLs+b.url),this._loaders.push(b),b.addEventListener(a.LoaderEvent.COMPLETE,this.completeChildHandler,this),b.addEventListener(a.LoaderEvent.FAIL,this.errorChildHandler,this),b.addEventListener(a.LoaderEvent.UNLOAD,this.unloadChildHandler,this),b.addEventListener(a.LoaderEvent.OPEN,this.openChildHandler,this),b)},c.prototype.getLoader=function(b){for(var c,d=this._loaders.length;--d>-1;){if(c=this._loaders[d],c.name==b||c instanceof a.LoaderItem&&c.url==b)return c;if(c.hasOwnProperty("getLoader")&&(c=c.getLoader(b),null!=c))return c}return null},c.prototype.getContent=function(a){var b=this.getLoader(a);return null!=b?b.content:null},c.getContent=function(b){return void 0!=a.LoaderCore._globalRootLoader?a.LoaderCore._globalRootLoader.getContent(b):null},c.getLoader=function(b){return void 0!=a.LoaderCore._globalRootLoader?a.LoaderCore._globalRootLoader.getLoader(b):null},c.print=function(){if(void 0!=a.LoaderCore._globalRootLoader){a.trace("--- all loaders ---");for(var b=a.LoaderCore._globalRootLoader._loaders.length,c=0;c<b;c++)a.trace(a.LoaderCore._globalRootLoader._loaders[c]);a.trace("--- end of loaders ---")}},Object.defineProperty(c.prototype,"content",{get:function(){for(var a=[],b=this._loaders.length;--b>-1;)a[b]=this._loaders[b].content;return a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"numChildren",{get:function(){return this._loaders.length},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"status",{get:function(){for(var b=this._loaders.length,c=0;c<b;c++)if(this._loaders[c].status==a.LoaderStatus.LOADING)return a.LoaderStatus.LOADING;return this._status},enumerable:!0,configurable:!0}),c}(a.LoaderCore);a.LoaderMax=b}(gamy||(gamy={}));var gamy;!function(a){function b(){if("orientation"in window)window.orientation==-90?e=d.landscapePrimary:90==window.orientation?e=d.landscapeSecondary:180==window.orientation?e=d.portraitSecondary:0==window.orientation&&(e=d.portraitPrimary);else{var a=window.screen.orientation||window.screen.mozOrientation||window.screen.msOrientation;a&&"type"in a?"landscape-primary"===a.type?e=d.landscapePrimary:"landscape-secondary"===a.type?e=d.landscapeSecondary:"portrait-secondary"===a.type?e=d.portraitSecondary:"portrait-primary"===a.type&&(e=d.portraitPrimary):e=d.landscapePrimary}}!function(a){a[a.CLICK=0]="CLICK",a[a.MOVE=1]="MOVE",a[a.DOWN=2]="DOWN",a[a.UP=3]="UP",a[a.OVER=4]="OVER",a[a.OUT=5]="OUT"}(a.EVENT_TYPE||(a.EVENT_TYPE={}));var c=a.EVENT_TYPE;!function(a){a[a.portraitPrimary=0]="portraitPrimary",a[a.portraitSecondary=1]="portraitSecondary",a[a.landscapePrimary=2]="landscapePrimary",a[a.landscapeSecondary=3]="landscapeSecondary"}(a.DeviceOrientation||(a.DeviceOrientation={}));var d=a.DeviceOrientation;!function(a){a[a.safari=0]="safari",a[a.unknown=1]="unknown"}(a.Browser||(a.Browser={}));var e,f=a.Browser;window.addEventListener("orientationchange",b),b(),function(a){a[a.iOS=0]="iOS",a[a.android=1]="android",a[a.unknown=2]="unknown"}(a.OperatingSystem||(a.OperatingSystem={}));var g=a.OperatingSystem,h=function(){function b(){throw new Error("static class")}return Object.defineProperty(b,"scaleFactor",{get:function(){return window.devicePixelRatio<2?1:window.devicePixelRatio<3?2:3},enumerable:!0,configurable:!0}),b.eventType=function(b){switch(b){case c.CLICK:return a.isMobile()?"tap":"click";case c.MOVE:return a.isMobile()?"touchmove":"mousemove";case c.DOWN:return a.isMobile()?"touchstart":"mousedown";case c.UP:return a.isMobile()?"touchend":"mouseup";case c.OVER:return a.isMobile()?"pointerover":"mouseover";case c.OUT:return a.isMobile()?"touchendoutside":"mouseout"}return null},b.isPrimaryTouchPoint=function(b){if(a.isMobile()){var c=b.data.originalEvent.touches;return 0==c.length||b.data.identifier==c[0].identifier}return!0},Object.defineProperty(b,"orientation",{get:function(){return e},enumerable:!0,configurable:!0}),Object.defineProperty(b,"operatingSystem",{get:function(){return navigator.userAgent.match(/Android/i)?g.android:navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)?g.iOS:g.unknown},enumerable:!0,configurable:!0}),Object.defineProperty(b,"browser",{get:function(){return navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&!navigator.userAgent.match("CriOS")?f.safari:f.unknown},enumerable:!0,configurable:!0}),b}();a.Capabilities=h}(gamy||(gamy={}));var gamy;!function(a){var b=function(){function b(){throw new Error("static class")}return b.has=function(a,b){return a.indexOf(b)>-1},b.print=function(c){for(var d="",e=c.length,f=0;f<e;f++){var g=f==e-1?"":",",h=c[f];d+=h instanceof Array?b.print(h)+g:"Object"===h.constructor.name?new a.Hash(h).toString()+g:h+g}return"["+d+"]"},b.isEmpty=function(a){return 0==a.length},b.remove=function(a,b){return a.filter(function(a,c,d){return a!=b})},b.diff=function(a,c){for(var d=[],e=a.length,f=0;f<e;f++)b.has(c,a[f])||d.push(a[f]);return d},b.intersect=function(a,c){var d=[],e=a.length,f=c.length;if(e<f)for(var g=0;g<e;g++)b.has(c,a[g])&&d.push(a[g]);else for(var g=0;g<f;g++)b.has(a,c[g])&&d.push(c[g]);return d},b.htmlCollectionToArray=function(a){return[].slice.call(a)},b.flatten=function(a){for(var c=[],d=a.length,e=0;e<d;e++){var f=a[e];f instanceof Array?c=c.concat(b.flatten(f)):c.push(f)}return c},b}();a.ArrayTools=b}(gamy||(gamy={}));var gamy;!function(a){var b=function(){function a(a,b){this._width=0,this._height=0,this._ratio=0,this.x=0,this.y=0,this._width=a,this._height=b,this._ratio=a/b}return Object.defineProperty(a.prototype,"width",{get:function(){return this._width},set:function(a){this._height=a/this._ratio,this._width=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this._height},set:function(a){this._width=a*this._ratio,this._height=a},enumerable:!0,configurable:!0}),a.prototype.constrain=function(a,b){return this.x=this.y=0,a/b<this._ratio?(this.width=a,this.y=(b-this._height)/2):(this.height=b,this.x=(a-this._width)/2),this},a.prototype.crop=function(a,b){return this.x=this.y=0,a/b>this._ratio?(this.width=a,this.y=(b-this._height)/2):(this.height=b,this.x=(a-this._width)/2),this},a}();a.Aspect=b}(gamy||(gamy={}));var gamy;!function(a){var b=sha1.hash,c=function(){function a(){}return a.create=function(){var c=(new Date).getTime(),d=Math.random();return a._counter++,b(c+"_"+d+"_"+a._counter)},a._counter=0,a}();a.GUID=c}(gamy||(gamy={}));var gamy;!function(a){var b=function(){function b(a){void 0===a&&(a=null),a&&this.merge(a)}return b.prototype.merge=function(a,c){if(void 0===c&&(c=!0),void 0==a)return this;for(var d=Object.keys(a),e=0;e<d.length;e++){var f=d[e];null!==a[f]&&(c&&this.instanceIsObjOrHash(this[f])&&this.instanceIsObjOrHash(a[f])?this[f]=new b(this[f]).merge(a[f],c):this[f]=a[f])}return this},b.prototype.instanceIsObjOrHash=function(a){return void 0!=a&&("Object"===a.constructor.name||a.constructor.className===b.className)},b.prototype.toString=function(){for(var c=[],d=Object.keys(this),e=0;e<d.length;e++){var f=d[e];this[f]instanceof Array?c.push(f+": "+a.ArrayTools.print(this[f])):c.push(f+": "+(this.instanceIsObjOrHash(this[f])?new b(this[f]).toString():this[f]))}return"{"+c.join(", ")+"}"},b.prototype.isEmpty=function(){return 0==Object.keys(this).length},b.prototype.has=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];for(var c=0;c<a.length;c++){var d=a[c];if(d instanceof Array&&this.has.apply(this,d))return!0;if(void 0!==this[d])return!0}return!1},Object.defineProperty(b.prototype,"length",{get:function(){return Object.keys(this).length},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"values",{get:function(){for(var a=[],b=Object.keys(this),c=0;c<b.length;c++){var d=b[c];a.push(this[d])}return a},enumerable:!0,configurable:!0}),b.prototype.diff=function(a){for(var c=new b,d=Object.keys(this),e=0;e<d.length;e++){var f=d[e];void 0!==a[f]&&a[f]==this[f]||(c[f]=this[f])}return c},b.prototype.mapValues=function(a){for(var c=new b,d=Object.keys(this),e=0;e<d.length;e++){var f=d[e];c[f]=a(f,this[f])}return c},b.prototype.dup=function(){return new b(this)},b.prototype.withoutKeys=function(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];var d=a[0]instanceof Array?a[0]:a,e=new b;return this.forEach(function(a,b){d.indexOf(a)<0&&(e[a]=this[a])}),e},b.prototype.forEach=function(a){for(var b=Object.keys(this),c=0;c<b.length;c++){var d=b[c];a.call(this,d,this[d])}},b.prototype.toObject=function(){var a={};return this.forEach(function(b,c){a[b]=this[b]}),a},b.className="gamy.Hash",b}();a.Hash=b}(gamy||(gamy={}));var gamy;!function(a){var b=function(){function a(){throw new Error("static class")}return a.currency=function(a){if(isNaN(a))return"0.00";var b=a/100+"",c=b.indexOf(".");return c==-1?b+".00":b.length-c==2?b+"0":b},a.formatCurrency=function(b){var c=a.currency(b),d=c.substring(0,c.indexOf(".")),e=c.substring(c.indexOf("."));return a.formatNumber(d)+e},a.formatNumber=function(a){for(var b=a.split(""),c=3,d=b.length;--d>0;)c--,0==c&&(c=3,b.splice(d,0," "));return b.join("")},a}();a.NumberTools=b}(gamy||(gamy={}));var gamy;!function(a){var b=function(){function a(){throw new Error("static class")}return a.digitalTime=function(){var b=new Date,c=b.getDate(),d=b.getHours(),e=b.getMinutes(),f=b.getSeconds(),g=b.getMilliseconds();return a.prefix(0,c,2-c.toString().length)+" "+a.months[b.getMonth()]+" "+b.getFullYear()+", "+a.prefix(0,d,2-d.toString().length)+":"+a.prefix(0,e,2-e.toString().length)+":"+a.prefix(0,f,2-f.toString().length)+":"+a.prefix(0,g,3-g.toString().length)},a.prefix=function(a,b,c){void 0===b&&(b=""),void 0===c&&(c=0);for(var d="",e=0;e<c;e++)d+=a;return d.concat(b)},a.toPackageNameConvention=function(a){for(var b=/([A-Z]?[a-z]*)/g,c=a.match(b),d=c.length,e="",f=0;f<d;f++)""!=c[f]&&(e+=(f>0?"_":"")+c[f].toLowerCase());return e},a.renderTemplate=function(a,b){return b=b||{},a.replace(/\(\([A-Za-z0-9]+\)\)/g,function(){var a=arguments[0],c=a.substr(2,a.length-4);return b[c]})},a.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a}();a.StringTools=b}(gamy||(gamy={}));var gamy;!function(a){var b=function(){function a(){}return a.easeIn=function(a,b,c,d){return-c*(Math.sqrt(1-(a/=d)*a)-1)+b},a.easeOut=function(a,b,c,d){return c*Math.sqrt(1-(a=a/d-1)*a)+b},a.easeInOut=function(a,b,c,d){return(a/=.5*d)<1?.5*-c*(Math.sqrt(1-a*a)-1)+b:.5*c*(Math.sqrt(1-(a-=2)*a)+1)+b},a}();a.Circ=b}(gamy||(gamy={}));