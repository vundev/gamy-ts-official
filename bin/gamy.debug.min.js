var gamy;!function(gamy){gamy.version="0.0.0"}(gamy||(gamy={}));var gamy;!function(gamy){!function(LogLevels){LogLevels[LogLevels.VERBOSE=0]="VERBOSE",LogLevels[LogLevels.NO_LOG=1]="NO_LOG"}(gamy.LogLevels||(gamy.LogLevels={}));var LogOptions=(gamy.LogLevels,function(){function LogOptions(name,options){void 0===options&&(options=null),this._name="["+name+"]",this._options=options||{}}return Object.defineProperty(LogOptions.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(LogOptions.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),LogOptions}());gamy.LogOptions=LogOptions}(gamy||(gamy={}));var gamy;!function(gamy){var ListenerMapItem=function(){function ListenerMapItem(context,callbacks){this.callbacks=new Array,this.context=context,this.callbacks=callbacks}return ListenerMapItem}(),EventDispatcher=function(){function EventDispatcher(target){this._listenerMap={},this._target=target}return EventDispatcher.prototype.addEventListener=function(type,callback,context){void 0==this._listenerMap[type]&&(this._listenerMap[type]=new Array);for(var items=this._listenerMap[type],length=items.length,i=0;i<length;i++)if(items[i].context==context){if(gamy.ArrayTools.has(items[i].callbacks,callback))return;return void items[i].callbacks.push(callback)}items.push(new ListenerMapItem(context,[callback]))},EventDispatcher.prototype.hasEventListener=function(type){return void 0!=this._listenerMap[type]},EventDispatcher.prototype.hasEventListenerForSpecificContext=function(type,context,callback){if(this.hasEventListener(type))for(var items=this._listenerMap[type],length_1=items.length,i=0;i<length_1;i++)if(items[i].context==context&&gamy.ArrayTools.has(items[i].callbacks,callback))return!0;return!1},EventDispatcher.prototype.dispatchEvent=function(event){if("string"==typeof event&&(event={type:event}),void 0==event.target&&(event.target=this._target||this),this.hasEventListener(event.type))for(var items=this._listenerMap[event.type].concat(),l1=items.length,i=0;i<l1;i++)for(var callbacks=items[i].callbacks.concat(),l2=callbacks.length,j=0;j<l2;j++)this.hasEventListenerForSpecificContext(event.type,items[i].context,callbacks[j])&&callbacks[j].call(items[i].context,event)},EventDispatcher.prototype.removeEventListener=function(type,callback,context){if(this.hasEventListener(type)){for(var items=this._listenerMap[type],length=items.length,i=0;i<length;i++){var sameContext=items[i].context==context;if(!context||sameContext){var j=items[i].callbacks.indexOf(callback);if(j>-1&&(items[i].callbacks.splice(j,1),0==items[i].callbacks.length&&(items.splice(i,1),i--,length--)),context&&sameContext)break}}0==items.length&&delete this._listenerMap[type]}},EventDispatcher}();gamy.EventDispatcher=EventDispatcher}(gamy||(gamy={}));var gamy;!function(gamy){var LoaderEvent=function(){function LoaderEvent(type,target){void 0===target&&(target=null),this.type=type,this.target=target}return LoaderEvent.COMPLETE="complete",LoaderEvent.FAIL="fail",LoaderEvent.CHILD_COMPLETE="childComplete",LoaderEvent.CHILD_FAIL="childFail",LoaderEvent.CHILD_OPEN="childOpen",LoaderEvent.UNLOAD="unload",LoaderEvent.OPEN="open",LoaderEvent}();gamy.LoaderEvent=LoaderEvent}(gamy||(gamy={}));var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},gamy;!function(gamy){!function(LoaderStatus){LoaderStatus[LoaderStatus.READY=0]="READY",LoaderStatus[LoaderStatus.LOADING=1]="LOADING",LoaderStatus[LoaderStatus.COMPLETED=2]="COMPLETED",LoaderStatus[LoaderStatus.FAILED=3]="FAILED"}(gamy.LoaderStatus||(gamy.LoaderStatus={}));var LoaderStatus=gamy.LoaderStatus,LoaderCore=function(_super){function LoaderCore(vars){if(void 0===vars&&(vars=null),_super.call(this),this._status=LoaderStatus.READY,this.vars=vars||{},this.name=void 0!=this.vars.name&&""!=this.vars.name?this.vars.name:"loader"+LoaderCore._loaderCount++,void 0==LoaderCore._globalRootLoader){if(1==this.vars.__isRoot)return;LoaderCore._globalRootLoader=new gamy.LoaderMax({name:"root",__isRoot:!0})}this!=LoaderCore._globalRootLoader&&LoaderCore._globalRootLoader.append(this)}return __extends(LoaderCore,_super),LoaderCore.prototype.load=function(){this._status==LoaderStatus.FAILED&&this.unload(),this._status==LoaderStatus.READY?(this._status=LoaderStatus.LOADING,this._load(),this.dispatchEvent(new gamy.LoaderEvent(gamy.LoaderEvent.OPEN,this))):this._status==LoaderStatus.COMPLETED&&this.completeHandler()},LoaderCore.prototype._load=function(){},LoaderCore.prototype.unload=function(){this._content=null;var oldStatus=this._status;this._status=LoaderStatus.READY,oldStatus==LoaderStatus.COMPLETED&&this.dispatchEvent(new gamy.LoaderEvent(gamy.LoaderEvent.UNLOAD))},LoaderCore.prototype.completeHandler=function(event){void 0===event&&(event=null),this._status=LoaderStatus.COMPLETED,this.dispatchEvent(new gamy.LoaderEvent(gamy.LoaderEvent.COMPLETE))},LoaderCore.prototype.errorHandler=function(event){void 0===event&&(event=null),this._status=LoaderStatus.FAILED,this.dispatchEvent(new gamy.LoaderEvent(gamy.LoaderEvent.FAIL))},LoaderCore.prototype.toString=function(){return this.name},Object.defineProperty(LoaderCore.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),Object.defineProperty(LoaderCore.prototype,"content",{get:function(){return this._content},enumerable:!0,configurable:!0}),LoaderCore._loaderCount=0,LoaderCore}(gamy.EventDispatcher);gamy.LoaderCore=LoaderCore}(gamy||(gamy={}));var gamy;!function(gamy){var LoaderItem=function(_super){function LoaderItem(url,vars){void 0===vars&&(vars=null),_super.call(this,vars),this.url=url}return __extends(LoaderItem,_super),LoaderItem.prototype.getQueryString=function(query){for(var queryString="?",keys=Object.keys(query),_i=0;_i<keys.length;_i++){var name=keys[_i];queryString+=name+"="+query[name]+"&"}return queryString.substr(0,queryString.length-1)},Object.defineProperty(LoaderItem.prototype,"completeURL",{get:function(){return this.url+this.query},enumerable:!0,configurable:!0}),Object.defineProperty(LoaderItem.prototype,"query",{get:function(){return void 0!=this.vars.query?this.getQueryString(this.vars.noCache?new gamy.Hash(this.vars.query).merge({gyCacheBusterID:LoaderItem._cacheID++}):this.vars.query):this.vars.noCache?"?gyCacheBusterID="+LoaderItem._cacheID++:""},enumerable:!0,configurable:!0}),LoaderItem.prototype.toString=function(){return _super.prototype.toString.call(this)+" url: "+this.url},LoaderItem._cacheID=(new Date).getTime(),LoaderItem}(gamy.LoaderCore);gamy.LoaderItem=LoaderItem}(gamy||(gamy={}));var gamy;!function(gamy){function getDefinitionByName(name){var package=name.split(".");try{for(var constr=window,length_2=package.length,i=0;i<length_2;i++)constr=constr[package[i]];return constr}catch(error){return null}}function trace(){for(var rest=[],_i=0;_i<arguments.length;_i++)rest[_i-0]=arguments[_i];var diffFromDefault=!1;if(rest[0]instanceof gamy.LogOptions){diffFromDefault=!0;var options=rest[0];if(options.options.level==gamy.LogLevels.NO_LOG)return;options.options.level==gamy.LogLevels.VERBOSE&&(rest[0]=options.name)}else if(null!=gamy.LogOptions.DEFAULT_LOG&&(options=gamy.LogOptions.DEFAULT_LOG,options.options.level==gamy.LogLevels.NO_LOG))return;for(var result=[],length_3=rest.length,i=0;i<length_3;i++){var toStringCondition=void 0;try{toStringCondition=rest[i].toString instanceof Function}catch(error){toStringCondition=!1}result[i]=toStringCondition?rest[i].toString():rest[i]}diffFromDefault||null==gamy.LogOptions.DEFAULT_LOG||result.unshift(gamy.LogOptions.DEFAULT_LOG.name),console.log("=== "+gamy.StringTools.digitalTime()+" ==="),console.log.apply(console,result)}function log(useConsoleLogOrTrace){for(var rest=[],_i=1;_i<arguments.length;_i++)rest[_i-1]=arguments[_i];useConsoleLogOrTrace?console.log.apply(console,rest):trace.apply(null,rest)}function setCondition(time){var id=gamy.GUID.create();return conditionMap[id]=new ConditionMapItem(0,time),id}function checkCondition(id){var data=conditionMap[id],newts=(new Date).getTime(),oldts=data.ts;return data.ts=newts,newts-oldts<data.time}function clearCondition(id){delete conditionMap[id]}function isMobile(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))}gamy.NAMESPACE="gamy",gamy.getDefinitionByName=getDefinitionByName,gamy.trace=trace,gamy.log=log;var conditionMap={},ConditionMapItem=function(){function ConditionMapItem(ts,time){this.ts=ts,this.time=time}return ConditionMapItem}();gamy.setCondition=setCondition,gamy.checkCondition=checkCondition,gamy.clearCondition=clearCondition,gamy.isMobile=isMobile}(gamy||(gamy={}));var gamy;!function(gamy){var GameLoader=function(_super){function GameLoader(url,vars){if(void 0===vars&&(vars=null),_super.call(this,url,vars),this._documentClassName=this.vars.documentClassName,void 0==this._documentClassName)throw new Error("Must point to a valid document class name!");this._scriptID=gamy.NAMESPACE+this.name}return __extends(GameLoader,_super),GameLoader.prototype.createScriptElemnt=function(){this._script=document.createElement("script"),this._script.id=this._scriptID},GameLoader.prototype._load=function(){var that=this;this.createScriptElemnt(),this._script.onload=function(event){var definition=gamy.getDefinitionByName(that._documentClassName);that._content=new definition,that.completeHandler(event)},this._script.onerror=function(event){that.errorHandler(event)},this._script.src=this.completeURL,$("head")[0].appendChild(this._script)},GameLoader.prototype.unload=function(){$("#"+this._scriptID).remove(),_super.prototype.unload.call(this)},GameLoader}(gamy.LoaderItem);gamy.GameLoader=GameLoader}(gamy||(gamy={}));var gamy;!function(gamy){var JSONLoader=function(_super){function JSONLoader(url,vars){void 0===vars&&(vars=null),_super.call(this,url,vars)}return __extends(JSONLoader,_super),JSONLoader.prototype._load=function(){var that=this,request=new XMLHttpRequest;request.overrideMimeType&&request.overrideMimeType("application/json"),request.open("GET",this.completeURL,!0),request.onreadystatechange=function(){4==Number(request.readyState)&&"200"==String(request.status)?(that._content=JSON.parse(request.responseText),that.parseLoaders(that._content.loaders),that.completeHandler()):that.errorHandler()},request.send(null)},JSONLoader.prototype.parseLoaders=function(config,to){for(var _i=0;_i<config.length;_i++){var item=config[_i],definition=gamy.getDefinitionByName("gamy."+item.type),loader="LoaderMax"==item.type?new definition(item.vars):new definition(item.url,item.vars);void 0!=to&&to.append(loader),"LoaderMax"==item.type&&this.parseLoaders(item.children,loader)}},JSONLoader}(gamy.LoaderItem);gamy.JSONLoader=JSONLoader}(gamy||(gamy={}));var gamy;!function(gamy){var LoaderMax=function(_super){function LoaderMax(vars){void 0===vars&&(vars=null),_super.call(this,vars),this._loaders=[],this._completeLoadersCount=0,this._prependURLs=void 0!=this.vars.prependURLs?this.vars.prependURLs:""}return __extends(LoaderMax,_super),LoaderMax.prototype._load=function(){for(var length=this._loaders.length,i=0;i<length;i++)this._loaders[i].load()},LoaderMax.prototype.completeChildHandler=function(event){this._completeLoadersCount++,this.dispatchEvent(new gamy.LoaderEvent(gamy.LoaderEvent.CHILD_COMPLETE,event.target)),this._completeLoadersCount==this._loaders.length&&(this._status==gamy.LoaderStatus.FAILED?this.errorHandler():this.completeHandler())},LoaderMax.prototype.errorChildHandler=function(event){this._completeLoadersCount++,this._status=gamy.LoaderStatus.FAILED,this.dispatchEvent(new gamy.LoaderEvent(gamy.LoaderEvent.CHILD_FAIL,event.target)),this._completeLoadersCount==this._loaders.length&&this.errorHandler()},LoaderMax.prototype.unloadChildHandler=function(event){this._completeLoadersCount--},LoaderMax.prototype.openChildHandler=function(event){this.dispatchEvent(new gamy.LoaderEvent(gamy.LoaderEvent.CHILD_OPEN,event.target))},LoaderMax.prototype.append=function(loader){return gamy.ArrayTools.has(this._loaders,loader)?null:(loader instanceof gamy.LoaderItem&&(loader.url=this._prependURLs+loader.url),this._loaders.push(loader),loader.addEventListener(gamy.LoaderEvent.COMPLETE,this.completeChildHandler,this),loader.addEventListener(gamy.LoaderEvent.FAIL,this.errorChildHandler,this),loader.addEventListener(gamy.LoaderEvent.UNLOAD,this.unloadChildHandler,this),loader.addEventListener(gamy.LoaderEvent.OPEN,this.openChildHandler,this),loader)},LoaderMax.prototype.getLoader=function(nameOrURL){for(var loader,i=this._loaders.length;--i>-1;){if(loader=this._loaders[i],loader.name==nameOrURL||loader instanceof gamy.LoaderItem&&loader.url==nameOrURL)return loader;if(loader.hasOwnProperty("getLoader")&&(loader=loader.getLoader(nameOrURL),null!=loader))return loader}return null},LoaderMax.prototype.getContent=function(nameOrURL){var loader=this.getLoader(nameOrURL);return null!=loader?loader.content:null},LoaderMax.getContent=function(nameOrURL){return void 0!=gamy.LoaderCore._globalRootLoader?gamy.LoaderCore._globalRootLoader.getContent(nameOrURL):null},LoaderMax.getLoader=function(nameOrURL){return void 0!=gamy.LoaderCore._globalRootLoader?gamy.LoaderCore._globalRootLoader.getLoader(nameOrURL):null},LoaderMax.print=function(){if(void 0!=gamy.LoaderCore._globalRootLoader){gamy.trace("--- all loaders ---");for(var length_4=gamy.LoaderCore._globalRootLoader._loaders.length,i=0;i<length_4;i++)gamy.trace(gamy.LoaderCore._globalRootLoader._loaders[i]);gamy.trace("--- end of loaders ---")}},Object.defineProperty(LoaderMax.prototype,"content",{get:function(){for(var a=[],i=this._loaders.length;--i>-1;)a[i]=this._loaders[i].content;return a},enumerable:!0,configurable:!0}),Object.defineProperty(LoaderMax.prototype,"numChildren",{get:function(){return this._loaders.length},enumerable:!0,configurable:!0}),Object.defineProperty(LoaderMax.prototype,"status",{get:function(){for(var length=this._loaders.length,i=0;i<length;i++)if(this._loaders[i].status==gamy.LoaderStatus.LOADING)return gamy.LoaderStatus.LOADING;return this._status},enumerable:!0,configurable:!0}),LoaderMax}(gamy.LoaderCore);gamy.LoaderMax=LoaderMax}(gamy||(gamy={}));var gamy;!function(gamy){function onOrientationChange(){if("orientation"in window)window.orientation==-90?deviceOrientation=DeviceOrientation.landscapePrimary:90==window.orientation?deviceOrientation=DeviceOrientation.landscapeSecondary:180==window.orientation?deviceOrientation=DeviceOrientation.portraitSecondary:0==window.orientation&&(deviceOrientation=DeviceOrientation.portraitPrimary);else{var orientation=window.screen.orientation||window.screen.mozOrientation||window.screen.msOrientation;orientation&&"type"in orientation?"landscape-primary"===orientation.type?deviceOrientation=DeviceOrientation.landscapePrimary:"landscape-secondary"===orientation.type?deviceOrientation=DeviceOrientation.landscapeSecondary:"portrait-secondary"===orientation.type?deviceOrientation=DeviceOrientation.portraitSecondary:"portrait-primary"===orientation.type&&(deviceOrientation=DeviceOrientation.portraitPrimary):deviceOrientation=DeviceOrientation.landscapePrimary}}!function(EVENT_TYPE){EVENT_TYPE[EVENT_TYPE.CLICK=0]="CLICK",EVENT_TYPE[EVENT_TYPE.MOVE=1]="MOVE",EVENT_TYPE[EVENT_TYPE.DOWN=2]="DOWN",EVENT_TYPE[EVENT_TYPE.UP=3]="UP",EVENT_TYPE[EVENT_TYPE.OVER=4]="OVER",EVENT_TYPE[EVENT_TYPE.OUT=5]="OUT"}(gamy.EVENT_TYPE||(gamy.EVENT_TYPE={}));var EVENT_TYPE=gamy.EVENT_TYPE;!function(DeviceOrientation){DeviceOrientation[DeviceOrientation.portraitPrimary=0]="portraitPrimary",DeviceOrientation[DeviceOrientation.portraitSecondary=1]="portraitSecondary",DeviceOrientation[DeviceOrientation.landscapePrimary=2]="landscapePrimary",DeviceOrientation[DeviceOrientation.landscapeSecondary=3]="landscapeSecondary"}(gamy.DeviceOrientation||(gamy.DeviceOrientation={}));var DeviceOrientation=gamy.DeviceOrientation;!function(Browser){Browser[Browser.safari=0]="safari",Browser[Browser.unknown=1]="unknown"}(gamy.Browser||(gamy.Browser={}));var deviceOrientation,Browser=gamy.Browser;window.addEventListener("orientationchange",onOrientationChange),onOrientationChange(),function(OperatingSystem){OperatingSystem[OperatingSystem.iOS=0]="iOS",OperatingSystem[OperatingSystem.android=1]="android",OperatingSystem[OperatingSystem.unknown=2]="unknown"}(gamy.OperatingSystem||(gamy.OperatingSystem={}));var OperatingSystem=gamy.OperatingSystem,Capabilities=function(){function Capabilities(){throw new Error("static class")}return Object.defineProperty(Capabilities,"scaleFactor",{get:function(){return window.devicePixelRatio<2?1:window.devicePixelRatio<3?2:3},enumerable:!0,configurable:!0}),Capabilities.eventType=function(type){switch(type){case EVENT_TYPE.CLICK:return gamy.isMobile()?"tap":"click";case EVENT_TYPE.MOVE:return gamy.isMobile()?"touchmove":"mousemove";case EVENT_TYPE.DOWN:return gamy.isMobile()?"touchstart":"mousedown";case EVENT_TYPE.UP:return gamy.isMobile()?"touchend":"mouseup";case EVENT_TYPE.OVER:return gamy.isMobile()?"pointerover":"mouseover";case EVENT_TYPE.OUT:return gamy.isMobile()?"touchendoutside":"mouseout"}return null},Capabilities.isPrimaryTouchPoint=function(event){if(gamy.isMobile()){var touches=event.data.originalEvent.touches;return 0==touches.length||event.data.identifier==touches[0].identifier}return!0},Object.defineProperty(Capabilities,"orientation",{get:function(){return deviceOrientation},enumerable:!0,configurable:!0}),Object.defineProperty(Capabilities,"operatingSystem",{get:function(){return navigator.userAgent.match(/Android/i)?OperatingSystem.android:navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)?OperatingSystem.iOS:OperatingSystem.unknown},enumerable:!0,configurable:!0}),Object.defineProperty(Capabilities,"browser",{get:function(){return navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&!navigator.userAgent.match("CriOS")?Browser.safari:Browser.unknown},enumerable:!0,configurable:!0}),Capabilities}();gamy.Capabilities=Capabilities}(gamy||(gamy={}));var gamy;!function(gamy){var ArrayTools=function(){function ArrayTools(){throw new Error("static class")}return ArrayTools.has=function(collection,what){return collection.indexOf(what)>-1},ArrayTools.print=function(array){for(var output="",length=array.length,i=0;i<length;i++){var comma=i==length-1?"":",",element=array[i];output+=element instanceof Array?ArrayTools.print(element)+comma:"Object"===element.constructor.name?new gamy.Hash(element).toString()+comma:element+comma}return"["+output+"]"},ArrayTools.isEmpty=function(array){return 0==array.length},ArrayTools.remove=function(array,elem){return array.filter(function(item,index,arr){return item!=elem})},ArrayTools.diff=function(array,compare){for(var unique=[],length=array.length,i=0;i<length;i++)ArrayTools.has(compare,array[i])||unique.push(array[i]);return unique},ArrayTools.intersect=function(array1,array2){var intersection=[],l1=array1.length,l2=array2.length;if(l1<l2)for(var i=0;i<l1;i++)ArrayTools.has(array2,array1[i])&&intersection.push(array1[i]);else for(var i=0;i<l2;i++)ArrayTools.has(array1,array2[i])&&intersection.push(array2[i]);return intersection},ArrayTools.htmlCollectionToArray=function(collection){return[].slice.call(collection)},ArrayTools.flatten=function(array){for(var flattened=[],length=array.length,i=0;i<length;i++){var item=array[i];item instanceof Array?flattened=flattened.concat(ArrayTools.flatten(item)):flattened.push(item)}return flattened},ArrayTools}();gamy.ArrayTools=ArrayTools}(gamy||(gamy={}));var gamy;!function(gamy){var Aspect=function(){function Aspect(width,height){this._width=0,this._height=0,this._ratio=0,this.x=0,this.y=0,this._width=width,this._height=height,this._ratio=width/height}return Object.defineProperty(Aspect.prototype,"width",{get:function(){return this._width},set:function(value){this._height=value/this._ratio,this._width=value},enumerable:!0,configurable:!0}),Object.defineProperty(Aspect.prototype,"height",{get:function(){return this._height},set:function(value){this._width=value*this._ratio,this._height=value},enumerable:!0,configurable:!0}),Aspect.prototype.constrain=function(w,h){return this.x=this.y=0,w/h<this._ratio?(this.width=w,this.y=(h-this._height)/2):(this.height=h,this.x=(w-this._width)/2),this},Aspect.prototype.crop=function(w,h){return this.x=this.y=0,w/h>this._ratio?(this.width=w,this.y=(h-this._height)/2):(this.height=h,this.x=(w-this._width)/2),this},Aspect}();gamy.Aspect=Aspect}(gamy||(gamy={}));var gamy;!function(gamy){var hash=sha1.hash,GUID=function(){function GUID(){}return GUID.create=function(){var id1=(new Date).getTime(),id2=Math.random();return GUID._counter++,hash(id1+"_"+id2+"_"+GUID._counter)},GUID._counter=0,GUID}();gamy.GUID=GUID}(gamy||(gamy={}));var gamy;!function(gamy){var Hash=function(){function Hash(object){void 0===object&&(object=null),object&&this.merge(object)}return Hash.prototype.merge=function(object,recursive){if(void 0===recursive&&(recursive=!0),void 0==object)return this;for(var keys=Object.keys(object),_i=0;_i<keys.length;_i++){var name=keys[_i];null!==object[name]&&(recursive&&this.instanceIsObjOrHash(this[name])&&this.instanceIsObjOrHash(object[name])?this[name]=new Hash(this[name]).merge(object[name],recursive):this[name]=object[name])}return this},Hash.prototype.instanceIsObjOrHash=function(instance){return void 0!=instance&&("Object"===instance.constructor.name||instance.constructor.className===Hash.className)},Hash.prototype.toString=function(){for(var out=[],keys=Object.keys(this),_i=0;_i<keys.length;_i++){var name=keys[_i];this[name]instanceof Array?out.push(name+": "+gamy.ArrayTools.print(this[name])):out.push(name+": "+(this.instanceIsObjOrHash(this[name])?new Hash(this[name]).toString():this[name]))}return"{"+out.join(", ")+"}"},Hash.prototype.isEmpty=function(){return 0==Object.keys(this).length},Hash.prototype.has=function(){for(var rest=[],_i=0;_i<arguments.length;_i++)rest[_i-0]=arguments[_i];for(var _a=0;_a<rest.length;_a++){var needle=rest[_a];if(needle instanceof Array&&this.has.apply(this,needle))return!0;if(void 0!==this[needle])return!0}return!1},Object.defineProperty(Hash.prototype,"length",{get:function(){return Object.keys(this).length},enumerable:!0,configurable:!0}),Object.defineProperty(Hash.prototype,"values",{get:function(){for(var v=[],keys=Object.keys(this),_i=0;_i<keys.length;_i++){var name=keys[_i];v.push(this[name])}return v},enumerable:!0,configurable:!0}),Hash.prototype.diff=function(other){for(var h=new Hash,keys=Object.keys(this),_i=0;_i<keys.length;_i++){var name=keys[_i];void 0!==other[name]&&other[name]==this[name]||(h[name]=this[name])}return h},Hash.prototype.mapValues=function(callback){for(var h=new Hash,keys=Object.keys(this),_i=0;_i<keys.length;_i++){var name=keys[_i];h[name]=callback(name,this[name])}return h},Hash.prototype.dup=function(){return new Hash(this)},Hash.prototype.withoutKeys=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i-0]=arguments[_i];var keys=args[0]instanceof Array?args[0]:args,h=new Hash;return this.forEach(function(k,v){keys.indexOf(k)<0&&(h[k]=this[k])}),h},Hash.prototype.forEach=function(check){for(var keys=Object.keys(this),_i=0;_i<keys.length;_i++){var name=keys[_i];check.call(this,name,this[name])}},Hash.prototype.toObject=function(){var object={};return this.forEach(function(k,v){object[k]=this[k]}),object},Hash.className="gamy.Hash",Hash}();gamy.Hash=Hash}(gamy||(gamy={}));var gamy;!function(gamy){var NumberTools=function(){function NumberTools(){throw new Error("static class")}return NumberTools.currency=function(n){if(isNaN(n))return"0.00";var m=n/100+"",decimal=m.indexOf(".");return decimal==-1?m+".00":m.length-decimal==2?m+"0":m},NumberTools.formatCurrency=function(n){var currency=NumberTools.currency(n),banknotes=currency.substring(0,currency.indexOf(".")),coins=currency.substring(currency.indexOf("."));return NumberTools.formatNumber(banknotes)+coins},NumberTools.formatNumber=function(n){for(var prefix=n.split(""),counter=3,i=prefix.length;--i>0;)counter--,0==counter&&(counter=3,prefix.splice(i,0," "));return prefix.join("")},NumberTools}();gamy.NumberTools=NumberTools}(gamy||(gamy={}));var gamy;!function(gamy){var StringTools=function(){function StringTools(){throw new Error("static class")}return StringTools.digitalTime=function(){var date=new Date,day=date.getDate(),hour=date.getHours(),minutes=date.getMinutes(),seconds=date.getSeconds(),milliseconds=date.getMilliseconds();return StringTools.prefix(0,day,2-day.toString().length)+" "+StringTools.months[date.getMonth()]+" "+date.getFullYear()+", "+StringTools.prefix(0,hour,2-hour.toString().length)+":"+StringTools.prefix(0,minutes,2-minutes.toString().length)+":"+StringTools.prefix(0,seconds,2-seconds.toString().length)+":"+StringTools.prefix(0,milliseconds,3-milliseconds.toString().length)},StringTools.prefix=function(what,to,amount){void 0===to&&(to=""),void 0===amount&&(amount=0);for(var prefix="",i=0;i<amount;i++)prefix+=what;return prefix.concat(to)},StringTools.toPackageNameConvention=function(input){for(var regex=/([A-Z]?[a-z]*)/g,matches=input.match(regex),length=matches.length,result="",i=0;i<length;i++)""!=matches[i]&&(result+=(i>0?"_":"")+matches[i].toLowerCase());return result},StringTools.renderTemplate=function(src,values){return values=values||{},src.replace(/\(\([A-Za-z0-9]+\)\)/g,function(){var anchor=arguments[0],param=anchor.substr(2,anchor.length-4);return values[param]})},StringTools.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],StringTools}();gamy.StringTools=StringTools}(gamy||(gamy={}));var gamy;!function(gamy){var Circ=function(){function Circ(){}return Circ.easeIn=function(t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b},Circ.easeOut=function(t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b},Circ.easeInOut=function(t,b,c,d){return(t/=.5*d)<1?.5*-c*(Math.sqrt(1-t*t)-1)+b:.5*c*(Math.sqrt(1-(t-=2)*t)+1)+b},Circ}();gamy.Circ=Circ}(gamy||(gamy={}));
//# sourceMappingURL=gamy.debug.min.js.map